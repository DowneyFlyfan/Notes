---
id: Cpp_Basics
aliases: []
tags:
  - Circuit Design
---

# 库和用法

- `template <typename T>` 是一种通用数据类型, 必须作用于**类**，**函数**, **类型别名**

## C++ 标准库 `std`

### 新的类型

|类 | 常用方法/用法 | 解释 |
| :--- | :--- | :--- |
| `std::vector<T>` | `push_back(val)`, `pop_back()`, `size()`, `empty()`, `begin()`, `end()`, `at(i)`, `[]` | 动态数组。调试时推荐使用 `at()` 进行边界检查，追求性能时使用 `[]`。 |
| `std::string` | `substr(pos, len)`, `find(str)`, `c_str()`, `length()`, `+`, `==` | 使用 `+` 进行拼接。`c_str()` 用于与 C 字符串 API 交互 |
| `std::map<K, V>` | `insert({k,v})`, `find(k)`, `erase(k)`, `[]`, `count(k)` | 键值对，按键排序。`[]` 很方便，但如果键不存在，会插入新元素。 |
| `std::unordered_map<K,V>`| `insert({k,v})`, `find(k)`, `erase(k)`, `[]`, `count(k)` | 基于哈希的 map，查找比 `std::map` 快，但无序。 |
| 智能指针 | `std::unique_ptr`, `std::shared_ptr`, `std::weak_ptr` | 自动化内存管理。默认优先使用 `std::unique_ptr`。使用 `std::make_shared` 和 `std::make_unique` 创建。 |

### 正则表达式

| 概念/字符 | 描述 | 示例 | C++中的表示 |
| :-------- | :--- | :--- | :---------- |
| **字面量字符** | 匹配自身，除非具有特殊含义 | `a`, `1`, `_` | `"a"`, `"1"`, `"_"` |
| **字符类** | 匹配方括号内任意一个字符 | `[abc]` 匹配 'a'、'b' 或 'c' | `"[abc]"` |
| **范围字符类** | 匹配指定范围内的任意字符 | `[0-9]` 匹配任何数字 | `"[0-9]"` |
| **预定义字符类** | | | |
| `.` | 匹配除换行符外任意字符 | `a.b` 匹配 "acb", "a b" | `"a.b"` |
| `\d` | 匹配任意数字 (0-9) | `\d+` 匹配一个或多个数字 | `"\\d+"` |
| `\D` | 匹配任意非数字字符 | `\D` 匹配 'a', '!' 等 | `"\\D"` |
| `\w` | 匹配任意字母、数字或下划线 | `\w+` 匹配 "hello", "var_1" | `"\\w+"` |
| `\W` | 匹配任意非字母、数字、下划线字符 | `\W` 匹配 ' ', '#', '%' | `"\\W"` |
| `\s` | 匹配任意空白字符 (空格、制表符、换行符等) | `\s` 匹配 ' ' | `"\\s"` |
| `\S` | 匹配任意非空白字符 | `\S` 匹配 'a', '1', '_' | `"\\S"` |
| **锚点** | | | |
| `^` | 匹配字符串的开头 | `^abc` 匹配以 "abc" 开头的字符串 | `"^abc"` |
| `$` | 匹配字符串的结尾 | `abc$` 匹配以 "abc" 结尾的字符串 | `"abc$"` |
| `\b` | 匹配单词边界 | `\bword\b` 匹配完整的单词 "word" | `"\\bword\\b"` |
| `\B` | 匹配非单词边界 | `\Bword\B` 匹配 "swordfish" 中的 "word" | `"\\Bword\\B"` |
| **量词** | | | |
| `*` | 匹配前一个元素零次或多次 | `a*` 匹配 "", "a", "aa" | `"a*"` |
| `+` | 匹配前一个元素一次或多次 | `a+` 匹配 "a", "aa" (不匹配 "") | `"a+"` |
| `?` | 匹配前一个元素零次或一次 | `a?` 匹配 "a" 或 "" | `"a?"` |
| `{n}` | 匹配前一个元素恰好 `n` 次 | `a{3}` 匹配 "aaa" | `"a{3}"` |
| `{n,}` | 匹配前一个元素至少 `n` 次 | `a{2,}` 匹配 "aa", "aaa" 等 | `"a{2,}"` |
| `{n,m}` | 匹配前一个元素 `n` 到 `m` 次 | `a{1,3}` 匹配 "a", "aa", "aaa" | `"a{1,3}"` |
| `*?`, `+?`, `??` | 非贪婪模式（尽可能少地匹配） | `.*` (贪婪) vs `.*?` (非贪婪) | `".*?"` |
| **逻辑或** | | | |
| `|` | 匹配左右两边的任意一个表达式 | `cat|dog` 匹配 "cat" 或 "dog" | `"cat|dog"` |
| **分组与捕获** | | | |
| `()` | 分组，并捕获匹配的内容 | `(ab)+` 匹配 "ab", "abab" | `"(ab)+"` |
| `(?:)` | 非捕获分组（只分组不捕获） | `(?:ab)+` 匹配 "ab", "abab"，但不捕获 | `"(?:ab)+"` |
| `\n` | 反向引用第 `n` 个捕获组 | `(.)\1` 匹配 "aa", "bb" | `"(.)\\1"` |
| **转义字符** | | | |
| `\` | 转义特殊字符，使其匹配字面值 | `\.` 匹配字面量点号 | `"\\."` |

## 核心概念

| 特性 | 描述 | 解释 |
| :--- | :--- | :--- |
| RAII | 资源获取即初始化 (Resource Acquisition Is Initialization) | 将资源生命周期与对象生命周期绑定。例如：`std::ifstream`, `std::lock_guard`。 |
| `const` 正确性 | `const T*`, `T* const`, `const T&`, `T my_func() const` | 尽可能使用 `const` 来防止意外修改，并使接口更清晰。 |
| 头文件保护 | `#pragma once` | 防止同一头文件被多次包含。`#pragma once` 更简单且被广泛支持。 |
| 迭代器 | `begin()`, `end()`, `cbegin()`, `cend()`, `rbegin()`, `rend()` | 用于遍历容器。使用 `auto` 来简化迭代器声明。C++11 基于范围的 for 循环是更好的选择。 |
|右值|临时的，不可寻址的，即将销毁的表达式||
- [ ] |`&`| 定义时是引用(reference)符, 使用时是取地址操作|和指针一样高效, 不创建新的内存(编译器可能会创建指针来实现这一操作)|

# 经验之谈

- 记得超频
